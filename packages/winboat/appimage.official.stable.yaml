#!/SBUILD
#SELF: https://raw.githubusercontent.com/pkgforge/soarpkgs/refs/heads/main/packages/winboat/appimage.official.stable.yaml
_disabled: false

pkg: "winboat"
pkg_id: "github.com.TibixDev.winboat"
pkg_type: "appimage"
category:
  - "Emulator"
description: "Run Windows apps on Linux with seamless integration "
distro_pkg:
  archlinux:
    aur:
      - "winboat-bin"
homepage:
  - "https://github.com/TibixDev/winboat"
license:
  - id: "GPL-3.0"
    url: "https://github.com/TibixDev/winboat/raw/f4e48e5c902201ed4e1d960e24c0cdda732385ad/LICENSE"
maintainer:
  - "QaidVoid (https://github.com/QaidVoid)"
note:
  - "Pre Built AppImage Fetched from Upstream. Check/Report @ https://github.com/TibixDev/winboat"
src_url:
  - "https://github.com/TibixDev/winboat"
x_exec:
  bsys: "host://soar-dl"
  host:
    - "x86_64-Linux"
  shell: "bash"
  pkgver: |
    curl -qfsSL "https://api.gh.pkgforge.dev/repos/TibixDev/winboat/releases?per_page=100" | jq -r '[.[] | select(.draft == false and .prerelease == false)] | .[0].tag_name | gsub("\\s+"; "")' | tr -d '"'\''[:space:]'
  run: |
    soar dl "https://github.com/TibixDev/winboat" --match "appimage" -o "./${PKG}" --yes
    squishy appimage "./${PKG}" --icon --desktop --write
    find "${SBUILD_OUTDIR}" -maxdepth 1 -type f -iname "*.desktop" -exec sed -E 's/^[[:space:]]*[Ee]xec[[:space:]]*=[[:space:]]*[^[:space:]]+/Exec={{pkg_path}}/' -i "{}" \;
