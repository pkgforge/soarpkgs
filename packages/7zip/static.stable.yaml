#!/SBUILD
_disabled: false

pkg: "7zip"
pkg_id: "ip7z.7zip"
pkg_type: "static"
pkgver: "26.00"
ghcr_pkg: "ip7z/7zip"
category:
  - "Archiving"
  - "Compression"
  - "Utility"
description: "File archiver with a high compression ratio"
homepage:
  - "https://7-zip.org"
  - "https://github.com/ip7z/7zip"
maintainer:
  - "QaidVoid (contact@qaidvoid.dev)"
license:
  - "LGPL-2.0-only"
note:
  - "Official binary from https://github.com/ip7z/7zip"
  - "[PORTABLE] (Portable Static Binary)"
  - "[NO_DESKTOP_INTEGRATION]"
provides:
  - "7zip=>7z"
repology:
  - "7zip"
src_url:
  - "https://github.com/ip7z/7zip"
tag:
  - "archiver"
  - "compression"
  - "utility"
snapshots:
  - "25.01"
x_exec:
  host:
    - "x86_64-linux"
    - "aarch64-linux"
  shell: "sh"
  pkgver: |
    curl -qfsSL "https://api.github.com/repos/ip7z/7zip/releases/latest" | jq -r '.tag_name' | tr -d '"'\''[:space:]'
  run: |
    case "$ARCH" in
      aarch64) ARCH="arm64" ;;
      x86_64) ARCH="x64" ;;
    esac
    soar dl "https://github.com/ip7z/7zip@${PKGVER}" --glob "*linux-${ARCH}*.tar.xz" -o "./7z.tar.xz" --yes
    tar -xf "./7z.tar.xz"
    mv "./7zzs" "$SBUILD_OUTDIR/${PKG}"
    mv "./License.txt" "$SBUILD_OUTDIR/LICENSE"
    rm -rf "./7z.tar.xz" "$SBUILD_OUTDIR/7zz" "./History.txt" "./readme.txt" "./MANUAL"
